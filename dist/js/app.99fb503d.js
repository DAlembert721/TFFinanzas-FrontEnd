(function(t){function e(e){for(var n,i,c=e[0],s=e[1],l=e[2],u=0,v=[];u<c.length;u++)i=c[u],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(v.length)v.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==o[s]&&(n=!1)}n&&(r.splice(e--,1),t=c(c.s=a[0]))}return t}var n={},o={app:0},r=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"8db2bc27","chunk-2d216257":"256ee085","chunk-5ecd6ec2":"8379df55"}[t]+".js"}function c(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(t){var e=[],a=o[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=n);var r,s=document.createElement("script");s.charset="utf-8",s.timeout=120,c.nc&&s.setAttribute("nonce",c.nc),s.src=i(t);var l=new Error;r=function(e){s.onerror=s.onload=null,clearTimeout(u);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,a[1](l)}o[t]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:s})}),12e4);s.onerror=s.onload=r,document.head.appendChild(s)}return Promise.all(e)},c.m=t,c.c=n,c.d=function(t,e,a){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(a,n,function(e){return t[e]}.bind(null,n));return a},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"03ca":function(t,e,a){},"071c":function(t,e,a){"use strict";var n=a("aaf7"),o=a.n(n);o.a},"21a4":function(t,e,a){"use strict";var n=a("03ca"),o=a.n(n);o.a},"259d":function(t,e,a){t.exports=a.p+"img/oto.48a6739f.jpg"},"3ebf":function(t,e,a){"use strict";var n=a("cf90"),o=a.n(n);o.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},r=[],i={name:"App",components:{},data:function(){return{}}},c=i,s=a("2877"),l=a("6544"),u=a.n(l),d=a("7496"),v=Object(s["a"])(c,o,r,!1,null,null,null),p=v.exports;u()(v,{VApp:d["a"]});var m=a("f309");n["a"].use(m["a"]);var f=new m["a"]({}),h=a("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"py-0 px-0",attrs:{fluid:""}},[n("Slidebar"),n("v-row",[n("v-col",{staticClass:"col-sm-3"},[n("v-row",{staticClass:"d-flex justify-center pt-10",attrs:{"no-gutters":""}},[n("h3",[t._v("Bienvenido, "+t._s(t.account.first_name))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center py-6"},[n("v-img",{attrs:{"max-width":"50%","max-height":"50%",src:a("c037")}})],1),n("v-row",{staticClass:"mx-auto d-flex justify-center"},[n("h3",[t._v(t._s(t.account.organization))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center"},[n("h3",[t._v("RUC: "+t._s(t.account.ruc))])])],1),n("v-col",{staticClass:"col-sm-9"},[n("v-card",[n("v-card-title",[t._v(" Clientes "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("v-dialog",{attrs:{slot:"append","max-width":"60%"},slot:"append",scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"md12 hidden-sm-and-down",attrs:{color:"green accent-2"}},"v-btn",o,!1),a),[t._v("+ Agregar cliente ")]),n("v-btn",t._g(t._b({staticClass:"sm12 hidden-md-and-up",attrs:{color:"green accent-2",small:""}},"v-btn",o,!1),a),[t._v("+ ")])]}}]),model:{value:t.addClientDialog,callback:function(e){t.addClientDialog=e},expression:"addClientDialog"}},[n("v-card",[n("v-card-title",[t._v("Agregar cliente")]),n("v-card-text",[n("v-row",[n("v-col",{staticClass:"col-sm-5"},[n("v-row",[n("v-text-field",{attrs:{label:"Nombre"},model:{value:t.client.first_name,callback:function(e){t.$set(t.client,"first_name",e)},expression:"client.first_name"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"Apellidos"},model:{value:t.client.last_name,callback:function(e){t.$set(t.client,"last_name",e)},expression:"client.last_name"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"Celular"},model:{value:t.client.phone,callback:function(e){t.$set(t.client,"phone",e)},expression:"client.phone"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"DNI"},model:{value:t.client.dni,callback:function(e){t.$set(t.client,"dni",e)},expression:"client.dni"}})],1)],1),n("v-spacer"),n("v-col",{staticClass:"col-sm-5"},[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Email"},model:{value:t.client.email,callback:function(e){t.$set(t.client,"email",e)},expression:"client.email"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Dirección"},model:{value:t.client.address,callback:function(e){t.$set(t.client,"address",e)},expression:"client.address"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Línea de crédito",prefix:"S/"},model:{value:t.client.credit_total,callback:function(e){t.$set(t.client,"credit_total",e)},expression:"client.credit_total"}})],1),n("v-col",[n("v-select",{attrs:{items:t.currencies,label:"Moneda"},model:{value:t.client.currency,callback:function(e){t.$set(t.client,"currency",e)},expression:"client.currency"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Mantenimiento",rules:t.numberRule,"error-count":"2",type:"number",prefix:"S/"},model:{value:t.client.maintenance,callback:function(e){t.$set(t.client,"maintenance",e)},expression:"client.maintenance"}})],1)],1)],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Tasa de interés",suffix:"%"},model:{value:t.client.compensatory_value,callback:function(e){t.$set(t.client,"compensatory_value",e)},expression:"client.compensatory_value"}})],1),n("v-col",[n("v-text-field",{attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Tasa de interés con mora",suffix:"%"},model:{value:t.client.moratorium_value,callback:function(e){t.$set(t.client,"moratorium_value",e)},expression:"client.moratorium_value"}})],1),n("v-col",[n("v-select",{attrs:{items:t.rates,"item-text":"combined","item-value":"id",label:"Tipo tasa","return-object":""},model:{value:t.rateChose,callback:function(e){t.rateChose=e},expression:"rateChose"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){return t.saveClient()}}},[t._v("Agregar")]),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.addClientDialog=!1}}},[t._v("Cancelar")]),n("v-spacer")],1)],1)],1)],1)],1),n("v-data-table",{attrs:{headers:t.headers,items:t.clients,search:t.search,"footer-props":{"items-per-page-text":"Clientes por página:"}},scopedSlots:t._u([{key:"item.actions",fn:function(e){var a=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.goToClient(a)}}},[t._v(" mdi-account-details ")])]}}])})],1)],1)],1)],1)},b=[],_=(a("4160"),a("b0c0"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{attrs:{dense:"",color:"green accent-2"}},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!0}}}),a("v-spacer"),a("v-toolbar-title",[t._v("Otorongo")]),a("v-spacer"),a("v-btn",{on:{click:t.logout}},[t._v("Cerrar sesión")])],1),a("v-navigation-drawer",{attrs:{absolute:"",app:"",fixed:"",temporary:"",dark:""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("v-list",{attrs:{nav:"",dense:""}},[a("v-list-item-group",{staticClass:"text--accent-4",model:{value:t.group,callback:function(e){t.group=e},expression:"group"}},[a("v-list-item",[a("v-list-item-icon",{on:{click:function(e){return t.toHome()}}},[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-title",{on:{click:function(e){return t.toHome()}}},[t._v("Home")])],1),a("v-list-item",[a("v-list-item-icon",{on:{click:function(e){return t.toProfile()}}},[a("v-icon",[t._v("mdi-account")])],1),a("v-list-item-title",{on:{click:function(e){return t.toProfile()}}},[t._v("Perfil")])],1),a("v-list-item",[a("v-list-item-icon",{on:{click:function(e){return t.toProducts()}}},[a("v-icon",[t._v("mdi-package")])],1),a("v-list-item-title",{on:{click:function(e){return t.toProducts()}}},[t._v("Productos")])],1)],1)],1)]},proxy:!0}]),model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}})],1)}),x=[],y={name:"Slidebar",data:function(){return{drawer:!1,group:null}},methods:{toProfile:function(){this.$router.push({name:"profile"})},toHome:function(){this.$router.push({name:"home"})},toProducts:function(){this.$router.push({name:"product"})},logout:function(){this.$store.dispatch("auth/logout"),this.$router.push("index")}}},C=y,w=a("40dc"),k=a("5bc1"),I=a("8336"),V=a("132d"),P=a("8860"),O=a("da13"),S=a("1baa"),D=a("34c3"),j=a("5d23"),B=a("f774"),$=a("2fa4"),A=a("2a7f"),R=Object(s["a"])(C,_,x,!1,null,"4636473d",null),T=R.exports;u()(R,{VAppBar:w["a"],VAppBarNavIcon:k["a"],VBtn:I["a"],VIcon:V["a"],VList:P["a"],VListItem:O["a"],VListItemGroup:S["a"],VListItemIcon:D["a"],VListItemTitle:j["b"],VNavigationDrawer:B["a"],VSpacer:$["a"],VToolbarTitle:A["a"]});a("99af");var N=a("d4ec"),E=a("bee2"),M=a("bc3a"),z=a.n(M),U=localStorage.getItem("token"),F=z.a.create({baseURL:"https://otorongo.herokuapp.com/",headers:{"Content-type":"application/json"}});function q(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.access?{Authorization:"Bearer "+t.access}:(console.log("No token available"),{})}z.a.defaults.headers.common["Authorization"]=U;var L=function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"getClients",value:function(){var t=localStorage.getItem("id");return F.get("api/accounts/".concat(t,"/clients/"),{headers:q()})}},{key:"saveClient",value:function(t,e){return F.post("api/accounts/".concat(t,"/clients/"),e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},{key:"getClientByAccountIdAndId",value:function(t){var e=localStorage.getItem("id");return F.get("api/accounts/".concat(e,"/clients/").concat(t,"/"),{headers:q()})}},{key:"updateClient",value:function(t,e){var a=localStorage.getItem("id");return F.patch("api/accounts/".concat(a,"/clients/").concat(t,"/"),e,{headers:q()})}}]),t}(),G=new L,H=a("1232"),J=function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"login",value:function(t){var e=this;return F.post("api/login/",t).then((function(t){return t.data.access&&(e.decodedToken=Object(H["a"])(t.data.access),localStorage.setItem("token",t.data.access),localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("refresh",t.data.refresh),localStorage.setItem("id",e.decodedToken.user_id)),t}))}},{key:"register",value:function(t){return F.post("api/accounts/",t)}},{key:"logout",value:function(){localStorage.clear()}},{key:"getAccountById",value:function(t){return F.get("api/accounts/".concat(t,"/"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},{key:"updateAccountById",value:function(t,e,a){var n;return n=null!=a?{email:e.email,address:e.address,organization:e.organization,phone:e.phone,password:a}:e,F.patch("api/accounts/".concat(t,"/"),n,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}}]),t}(),Z=new J,Y=function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"getRates",value:function(){return F.get("api/rates/")}}]),t}(),K=new Y,Q={name:"Home",components:{Slidebar:T},data:function(){return{headers:[{text:"Nombre",align:"start",sortable:!0,value:"fullName"},{text:"Línea de crédito",value:"creditLine",sortable:!1},{text:"DNI",value:"dni",sortable:!1},{text:"Número telefónico",value:"phone",sortable:!1},{text:"Email",value:"email",sortable:!1},{text:"Detalles",value:"actions",sortable:!1}],id:0,account:{email:"",first_name:"",last_name:"",dni:"",phone:"",address:"",organization:"",ruc:"",location:""},client:{first_name:"",last_name:"",email:"",address:"",phone:"",dni:"",credit_total:0,compensatory_value:0,moratorium_value:0,currency:"",rate_id:"",quotation:1,maintenance:0},payday:1,addClientDialog:!1,currencies:["Soles","Dolares"],rateChose:null,rates:[],clients:[],search:null,numberRule:[function(t){return!isNaN(parseFloat(t))&&parseFloat(t)>=0||"El numero debe de ser positivo"}]}},mounted:function(){this.id=localStorage.getItem("id"),this.getClientsByAccount(),this.getUserById(this.id),this.getRates()},created:function(){localStorage.getItem("token")||this.$router.push("/login")},methods:{getUserById:function(t){var e=this;Z.getAccountById(t).then((function(t){e.account=t.data})).catch((function(t){console.log(t)}))},getClientsByAccount:function(){var t=this;G.getClients().then((function(e){var a=e.data;a.forEach((function(e){var a={id:e.id,fullName:e.first_name+" "+e.last_name,email:e.email,address:e.address,phone:e.phone,dni:e.dni,creditLine:e.credit_total,compensatoryValue:e.compensatory_value,moratoriumValue:e.moratorium_value,rateName:e.rate_name,openDate:e.open_date,quotation:e.quotation,maintenance:e.maintenance};t.clients.push(a)})),console.log(t.clients)})).catch((function(t){console.log(t)}))},getRates:function(){var t=this;this.clients=[],K.getRates().then((function(e){var a=e.data;a.forEach((function(e){var a={id:e.id,combined:e.name+" "+e.type};t.rates.push(a)})),t.rateChose=t.rates[1]})).catch((function(t){console.log(t)}))},saveClient:function(){var t=this;this.client.rate_id=this.rateChose.id,console.log(this.client),G.saveClient(this.id,this.client).then((function(e){console.log(e),t.client={first_name:"",last_name:"",email:"",address:"",phone:"",dni:"",credit_total:0,compensatory_value:0,moratorium_value:0,currency:"",rate_id:"",quotation:1,maintenance:0},t.getClientsByAccount(),t.addClientDialog=!1})).catch((function(t){console.log(t)}))},goToClient:function(t){this.$router.push("/client/".concat(t.id))}}},W=Q,X=a("b0af"),tt=a("99d9"),et=a("62ad"),at=a("a523"),nt=a("8fea"),ot=a("169a"),rt=a("adda"),it=a("0fd9"),ct=a("b974"),st=a("8654"),lt=Object(s["a"])(W,g,b,!1,null,"829cc4d8",null),ut=lt.exports;u()(lt,{VBtn:I["a"],VCard:X["a"],VCardActions:tt["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VDataTable:nt["a"],VDialog:ot["a"],VIcon:V["a"],VImg:rt["a"],VRow:it["a"],VSelect:ct["a"],VSpacer:$["a"],VTextField:st["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"bg",attrs:{fluid:""}},[n("v-row",[n("v-card",{staticClass:"mx-auto my-7",attrs:{elevation:"5",rounded:"",width:"60%"}},[n("v-row",[n("v-img",{staticClass:"mx-auto my-4",attrs:{"max-height":"10%","max-width":"10%",src:a("c121")}})],1),n("v-card-title",{staticClass:"d-flex justify-center"},[t._v(" Iniciar sesión ")]),n("v-card-text",[n("v-form",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{type:"password",label:"Contraseña"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-row",[n("v-btn",{staticClass:"mx-auto",attrs:{elevation:"2",color:"green accent-2"},on:{click:function(e){return t.handleLogin()}}},[t._v("LogIn")])],1),n("v-row",{staticClass:"d-flex justify-center mt-3"},[t._v(" ¿Aún no tienes una cuenta?"),n("a",{staticClass:"ml-1",on:{click:function(e){return t.register()}}},[t._v("Regístrate")])])],1)],1)],1)],1)],1)},vt=[],pt={name:"Login",data:function(){return{email:"",password:"",isValid:!0,emailRules:[function(t){return!!t||"Email is required"}],passwordRules:[function(t){return!!t||"Password is required"}],token:""}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},created:function(){this.loggedIn&&this.$router.push("/home")},methods:{handleLogin:function(){var t=this,e={email:this.email,password:this.password};e.email&&e.password&&this.$store.dispatch("auth/login",e).then((function(){t.logComplete()})).catch((function(t){console.log(t)}))},logComplete:function(){this.$router.push({name:"home"})},register:function(){this.$router.push("register")}}},mt=pt,ft=(a("baf9"),a("4bd4")),ht=Object(s["a"])(mt,dt,vt,!1,null,"103d1097",null),gt=ht.exports;u()(ht,{VBtn:I["a"],VCard:X["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VForm:ft["a"],VImg:rt["a"],VRow:it["a"],VTextField:st["a"]});var bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"bg",attrs:{fluid:""}},[n("v-row",[n("v-card",{staticClass:"mx-auto my-7",attrs:{elevation:"5",rounded:"",width:"60%"}},[n("v-row",[n("v-img",{staticClass:"mx-auto my-4",attrs:{"max-height":"10%","max-width":"10%",src:a("c121")}})],1),n("v-card-title",{staticClass:"d-flex justify-center"},[t._v(" Registro ")]),n("v-card-text",[n("v-form",[n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Nombres",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),n("v-text-field",{attrs:{label:"Apellidos",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}}),n("v-text-field",{attrs:{label:"DNI",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.dni,callback:function(e){t.dni=e},expression:"dni"}}),n("v-text-field",{attrs:{label:"Celular",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),n("v-text-field",{attrs:{label:"Nombre de la tienda",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.organization,callback:function(e){t.organization=e},expression:"organization"}}),n("v-text-field",{attrs:{label:"RUC",rules:t.generalRules,"error-count":"1",required:""},model:{value:t.ruc,callback:function(e){t.ruc=e},expression:"ruc"}})],1),n("v-col",[n("v-text-field",{attrs:{label:"Email",rules:t.emailRules,"error-count":"1",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-text-field",{attrs:{label:"Contraseña",rules:t.passwordRules,type:"password","error-count":"4",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-row",[n("v-col",[n("v-select",{attrs:{label:"Region",items:t.regions,"item-text":"name","item-value":"id",rules:t.generalRules,"return-object":""},on:{change:t.getProvincesItems},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1),n("v-col",[n("v-combobox",{attrs:{label:"Provincia",items:t.provinces,rules:t.generalRules,"item-text":"name","item-value":"id","return-object":""},on:{change:t.getDistrictItems},model:{value:t.province,callback:function(e){t.province=e},expression:"province"}})],1),n("v-col",[n("v-combobox",{attrs:{label:"Distrito",items:t.districts,rules:t.generalRules,"item-text":"name","return-object":""},model:{value:t.district,callback:function(e){t.district=e},expression:"district"}})],1)],1),n("v-text-field",{attrs:{label:"Dirección"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),n("v-row",[n("v-btn",{staticClass:"mx-auto",attrs:{elevation:"2",color:"green accent-2"},on:{click:t.handleRegister}},[t._v("Crear cuenta")])],1),n("v-row",{staticClass:"d-flex justify-center mt-3"},[t._v(" ¿Ya tienes una cuenta?"),n("a",{staticClass:"ml-1",on:{click:function(e){return t.login()}}},[t._v("Inicia sesión")])])],1)],1)],1)],1)],1)},_t=[],xt=function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"getRegions",value:function(){return F.get("api/regions/")}},{key:"getProvinces",value:function(t){return F.get("api/regions/".concat(t,"/provinces/"))}},{key:"getDistricts",value:function(t){return F.get("api/provinces/".concat(t,"/districts/"))}}]),t}(),yt=new xt,Ct={name:"Register",computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}},data:function(){return{firstName:"",lastName:"",dni:"",phone:"",email:"",password:"",organization:"",region:null,province:null,district:null,address:"",ruc:"",generalRules:[function(t){return!!t||"This space is required"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/.+@.+/.test(t)||"Email must valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=5||"Password must have at least 5 characters"},function(t){return/(?=.*[A-Z])/.test(t)||"Must have one uppercase character"},function(t){return/([!@#$%])/.test(t)||"Must have one special character [!@#$%]"}],regions:[],provinces:[],districts:[]}},watch:{},methods:{handleRegister:function(){var t=this,e={email:this.email,password:this.password,firstName:this.firstName,lastName:this.lastName,dni:this.dni,phone:this.phone,ruc:this.ruc,address:this.address,organization:this.organization,districtId:this.district.id};e.email&&e.password&&this.$store.dispatch("auth/register",e).then((function(){t.registerSuccess()})).catch((function(t){console.log(t)}))},registerSuccess:function(){this.$router.push("/login")},getProvincesItems:function(){var t=this;console.log(this.region),yt.getProvinces(this.region.id).then((function(e){t.provinces=e.data,console.log(e.data)})).catch((function(t){console.log(t)}))},getDistrictItems:function(){var t=this;console.log(this.province),yt.getDistricts(this.province.id).then((function(e){t.districts=e.data,console.log(e.data)})).catch((function(t){console.log(t)}))},getRegionItems:function(){var t=this;yt.getRegions().then((function(e){t.regions=e.data,console.log(e.data)})).catch((function(t){console.log(t)}))}},mounted:function(){this.getRegionItems(),this.loggedIn&&this.$router.push("/home")}},wt=Ct,kt=(a("21a4"),a("2b5d")),It=Object(s["a"])(wt,bt,_t,!1,null,"348a63ae",null),Vt=It.exports;u()(It,{VBtn:I["a"],VCard:X["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VCombobox:kt["a"],VContainer:at["a"],VForm:ft["a"],VImg:rt["a"],VRow:it["a"],VSelect:ct["a"],VTextField:st["a"]});var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"py-0",attrs:{fluid:""}},[n("v-row",[n("v-app-bar",{attrs:{color:"grey"}},[n("v-img",{attrs:{"max-width":"60px","aspect-ratio":"1.0954",src:a("cf05")}}),n("v-spacer"),n("v-btn",{staticClass:"mr-3",on:{click:function(e){return t.register()}}},[t._v("Registrarse")]),n("v-btn",{on:{click:function(e){return t.login()}}},[t._v("Iniciar sesión")])],1)],1),n("v-row",{staticClass:"align-stretch"},[n("v-col",{staticClass:"container col-sm-6 d-flex flex-column align-center justify-center"},[n("v-container",{staticClass:"d-flex flex-column align-center"},[n("h1",[t._v("OTORONGO")])]),n("v-container",{staticClass:"d-flex flex-column align-center"},[n("h2",[t._v("DEVORA TUS FINANZAS")])])],1),n("v-col",{staticClass:"col-sm-6"},[n("v-img",{attrs:{"max-width":"100%","aspect-ratio":"1.52363",src:a("259d")}})],1)],1),n("v-row",[n("v-footer",{staticClass:"col-sm",attrs:{absolute:"",color:"green accent-2"}},[n("v-col",{staticClass:"col-sm-1 d-flex justify-center"},[n("h3",[t._v("Otorongo")])]),n("v-col",{staticClass:"d-flex justify-center"},[n("h3",[t._v(" Copyright © Otorongo 2020. Todos los derechos reservados ")])]),n("v-col",{staticClass:"col-sm-4 d-flex justify-center"},[n("v-col",{staticClass:"d-flex align-center"},[n("v-btn",{attrs:{fab:"",small:"",color:"blue"}},[n("v-icon",{attrs:{color:"white"}},[t._v("mdi-facebook")])],1),n("v-btn",{attrs:{fab:"",small:"",color:"red"}},[n("v-icon",{attrs:{color:"white"}},[t._v("mdi-youtube")])],1),n("v-btn",{attrs:{fab:"",small:"",color:"blue lighten-2"}},[n("v-icon",{attrs:{color:"white"}},[t._v("mdi-twitter")])],1)],1),n("v-col",{staticClass:"d-flex align-center"},[n("v-btn",{attrs:{rounded:""}},[t._v("Libro de reclamaciones")])],1)],1)],1)],1)],1)},Ot=[],St={name:"Landing",methods:{register:function(){this.$router.push("register")},login:function(){this.$router.push({name:"login"})}}},Dt=St,jt=a("553a"),Bt=Object(s["a"])(Dt,Pt,Ot,!1,null,"227e019e",null),$t=Bt.exports;u()(Bt,{VAppBar:w["a"],VBtn:I["a"],VCol:et["a"],VContainer:at["a"],VFooter:jt["a"],VIcon:V["a"],VImg:rt["a"],VRow:it["a"],VSpacer:$["a"]});var At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"py-0 px-0",attrs:{fluid:""}},[n("Slidebar"),n("v-row",[n("v-col",{staticClass:"col-sm-5 d-flex justify-end align-center full"},[n("v-img",{attrs:{"max-width":"300px",src:a("c121")}})],1),n("v-col",{staticClass:"col-sm-7 d-flex justify-start align-center full"},[n("div",{staticClass:"details"},[n("div",[n("strong",[t._v("Nombre:")]),t._v(" "+t._s(t.account.first_name)+" ")]),n("div",[n("strong",[t._v("Apellido:")]),t._v(" "+t._s(t.account.last_name)+" ")]),n("div",[n("strong",[t._v("Celular:")]),t._v(" "+t._s(t.account.phone)+" ")]),n("div",[n("strong",[t._v("DNI:")]),t._v(" "+t._s(t.account.dni)+" ")]),n("div",[n("strong",[t._v("Email:")]),t._v(" "+t._s(t.account.email)+" ")]),n("div",[n("strong",[t._v("Dirección:")]),t._v(" "+t._s(t.account.address)+" ")]),n("div",{staticClass:"pb-3"},[n("strong",[t._v("Tienda:")]),t._v(" "+t._s(t.account.organization)+" ")]),n("v-dialog",{attrs:{"max-width":"40%"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attribs;return[n("v-btn",t._g(t._b({attrs:{small:"",color:"green accent-2"}},"v-btn",o,!1),a),[t._v("Editar perfil")])]}}]),model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[n("v-card",[n("v-card-title",[t._v("Editar perfil")]),n("v-card-text",[n("v-container",[n("v-row",[n("v-text-field",{attrs:{label:"Celular"},model:{value:t.account.phone,callback:function(e){t.$set(t.account,"phone",e)},expression:"account.phone"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"Tienda"},model:{value:t.account.organization,callback:function(e){t.$set(t.account,"organization",e)},expression:"account.organization"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"Email"},model:{value:t.account.email,callback:function(e){t.$set(t.account,"email",e)},expression:"account.email"}})],1),n("v-row",[n("v-text-field",{attrs:{label:"Dirección"},model:{value:t.account.address,callback:function(e){t.$set(t.account,"address",e)},expression:"account.address"}})],1),n("v-row",[n("v-text-field",{attrs:{"append-icon":t.hidePassword?"mdi-eye":"mdi-eye-off",type:t.hidePassword?"password":"text",label:"Contraseña"},on:{"click:append":function(){return t.hidePassword=!t.hidePassword}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{small:"",color:"green accent-2"},on:{click:function(e){t.editDialog=!1}}},[t._v("Cancelar")]),n("v-btn",{attrs:{small:"",color:"green accent-2"},on:{click:function(e){return t.updateUserById()}}},[t._v("Guardar")])],1)],1)],1)],1)])],1)],1)},Rt=[],Tt={name:"Profile",components:{Slidebar:T},data:function(){return{id:0,account:{email:"",first_name:"",last_name:"",dni:"",phone:"",address:"",organization:"",ruc:"",location:""},editDialog:!1,hidePassword:!0,password:null}},mounted:function(){this.id=localStorage.getItem("id"),this.getUserById(this.id)},methods:{getUserById:function(t){var e=this;Z.getAccountById(t).then((function(t){e.account=t.data,console.log(e.account)})).catch((function(t){console.log(t)}))},updateUserById:function(){var t={email:this.account.email,address:this.account.address,organization:this.account.organization,phone:this.account.phone};Z.updateAccountById(this.id,t,this.password).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}}},Nt=Tt,Et=(a("3ebf"),Object(s["a"])(Nt,At,Rt,!1,null,"6067ea4a",null)),Mt=Et.exports;u()(Et,{VBtn:I["a"],VCard:X["a"],VCardActions:tt["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VDialog:ot["a"],VImg:rt["a"],VRow:it["a"],VSpacer:$["a"],VTextField:st["a"]});var zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"py-0 px-0",attrs:{fluid:""}},[n("Slidebar"),n("v-row",{staticClass:"full"},[n("v-col",{staticClass:"col-sm-3"},[n("v-row",{staticClass:"d-flex justify-center pt-10",attrs:{"no-gutters":""}},[n("h3",[t._v(t._s(t.client.first_name+" "+t.client.last_name))])]),n("v-row",{staticClass:"d-flex justify-center",attrs:{"no-gutters":""}},[n("h4",{staticClass:"pr-1"},[t._v("Línea de crédito:")]),n("h4",[t._v(t._s(t.client.credit_total))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center py-6",attrs:{"no-gutters":""}},[n("v-img",{attrs:{"max-width":"60%",src:a("c121")}})],1),n("v-row",{staticClass:"mx-auto d-flex justify-center",attrs:{"no-gutters":""}},[n("h3",{staticClass:"pr-1"},[t._v("Celular:")]),n("h3",[t._v(t._s(t.client.phone))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center",attrs:{"no-gutters":""}},[n("h3",{staticClass:"pr-1"},[t._v("DNI:")]),n("h3",[t._v(t._s(t.client.dni))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center",attrs:{"no-gutters":""}},[n("h3",{staticClass:"pr-1"},[t._v("Email:")]),n("h3",[t._v(t._s(t.client.email))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center",attrs:{"no-gutters":""}},[n("h3",{staticClass:"pr-1"},[t._v("Tipo de cuenta:")]),n("h3",[t._v(t._s(t.client.currency))])]),n("v-row",{staticClass:"mx-auto d-flex justify-center py-5"},[n("v-dialog",{attrs:{"max-width":"40%"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({attrs:{color:"green accent-2"}},"v-btn",o,!1),a),[t._v("Editar cliente")])]}}]),model:{value:t.editClientDialog,callback:function(e){t.editClientDialog=e},expression:"editClientDialog"}},[n("v-card",[n("v-card-title",[t._v("Editar cliente")]),n("v-card-text",[n("v-row",[n("v-text-field",{attrs:{label:"Dirección"},model:{value:t.client.address,callback:function(e){t.$set(t.client,"address",e)},expression:"client.address"}})],1),n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:"Tasa de interés compensatorio",rules:t.numberRule,"error-count":"2",type:"number"},model:{value:t.client.compensatory_value,callback:function(e){t.$set(t.client,"compensatory_value",e)},expression:"client.compensatory_value"}})],1),n("v-col",[n("v-text-field",{attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Tasa de interés moratorio"},model:{value:t.client.moratorium_value,callback:function(e){t.$set(t.client,"moratorium_value",e)},expression:"client.moratorium_value"}})],1)],1),n("v-row",[n("v-text-field",{attrs:{type:"number",rules:t.numberRule,"error-count":"2",label:"Línea de crédito"},model:{value:t.client.credit_total,callback:function(e){t.$set(t.client,"credit_total",e)},expression:"client.credit_total"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.editClientDialog=!1}}},[t._v("Cancelar")]),n("v-btn",{attrs:{color:"green accent-2"},on:{click:t.editClientById}},[t._v("Guardar")]),n("v-spacer")],1)],1)],1)],1)],1),n("v-col",{staticClass:"col-sm-9"},[n("v-row",{staticClass:"d-flex justify-center py-5"},[n("h2",{staticClass:"pr-2"},[t._v("Tasa de interés compensatorio: ")]),n("h2",{staticClass:"pr-2"},[t._v(t._s(t.client.compensatory_value+"%"))]),n("h2",[t._v(t._s(t.client.rate_name))])]),n("v-row",{staticClass:"d-flex justify-center pb-5"},[n("h2",{staticClass:"pr-2"},[t._v("Tasa de interés moratorio: ")]),n("h2",{staticClass:"pr-2"},[t._v(t._s(t.client.moratorium_value+"%"))]),n("h2",[t._v(t._s(t.client.rate_name))])]),n("v-row",{staticClass:"d-flex justify-center"},[n("v-card",[n("v-card-title",[t._v(" Operaciones "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("v-dialog",{attrs:{slot:"append","max-width":"40%"},slot:"append",scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"md12 hidden-sm-and-down",attrs:{color:"green accent-2"}},"v-btn",o,!1),a),[t._v("+ Agregar operación ")]),n("v-btn",t._g(t._b({staticClass:"sm12 hidden-md-and-up",attrs:{color:"green accent-2",small:""}},"v-btn",o,!1),a),[t._v("+ ")])]}}]),model:{value:t.addOperationDialog,callback:function(e){t.addOperationDialog=e},expression:"addOperationDialog"}},[n("v-card",[n("v-card-title",[t._v("Agregar operación")]),n("v-card-text",[n("v-row",[n("v-text-field",{staticClass:"align-center mx-3",attrs:{label:"Plazo de pago",suffix:"días",rules:t.numberRule,"error-count":"2",type:"number"},model:{value:t.operation.time,callback:function(e){t.$set(t.operation,"time",e)},expression:"operation.time"}})],1),n("v-spacer"),n("v-row",[n("v-col",{staticClass:"col-sm-10 d-flex align-center"},[n("v-text-field",{attrs:{label:"Delivery",rules:t.numberRule,"error-count":"2",type:"number"},model:{value:t.operation.delivery,callback:function(e){t.$set(t.operation,"delivery",e)},expression:"operation.delivery"}})],1),n("v-col",{staticClass:"col-sm-2 d-flex align-center"},[n("h3",[t._v(t._s(t.client.currency))])])],1),n("v-spacer"),n("v-row",[n("v-select",{staticClass:"align-center mx-3",attrs:{items:t.products,"item-text":"name",multiple:"",placeholder:"Seleccione productos","return-object":""},model:{value:t.productsSelected,callback:function(e){t.productsSelected=e},expression:"productsSelected"}})],1),t._l(t.productsSelected,(function(e){return n("v-row",{key:e.id,staticClass:"align-content-center"},[n("v-spacer"),n("v-col",{staticClass:"col-sm-5 d-flex align-center"},[n("h3",[t._v(t._s(e.name))])]),n("v-col",{staticClass:"col-sm-5 d-flex align-center"},[n("v-text-field",{staticClass:"m-0 p-0",attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Cantidad",suffix:""},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"product.quantity"}})],1),n("v-col",{staticClass:"col-sm-2 d-flex align-center"},[n("h3",[t._v(t._s(e.measurement))])])],1)})),n("v-spacer")],2),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){return t.addOperation()}}},[t._v("Agregar")]),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.addOperationDialog=!1}}},[t._v("Cancelar ")]),n("v-spacer")],1)],1)],1)],1)],1),n("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.headers,items:t.items,"items-per-page":10,"footer-props":{"items-per-page-text":"Operaciones por página:"}},scopedSlots:t._u([{key:"item.actions",fn:function(e){var a=e.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v("mdi-menu")])]}}])})],1)],1),n("v-row",{staticClass:"justify-center mt-5"},[n("v-btn",{staticClass:"justify-center d-flex",attrs:{color:"green accent-2"},on:{click:function(e){t.addPaymentDialog=!0}}},[t._v("Pagar ")])],1),t.flag?n("v-row",{staticClass:"justify-center mt-5"},[n("h3",[t._v("Se pagaron: "+t._s(t.pays)+" operaciones")])]):t._e(),t.change?n("v-row",{staticClass:"justify-center mt-5"},[n("h3",[t._v("Su cambio es de "+t._s(t.payment+" "+t.client.currency))])]):t._e(),n("v-row",{staticClass:"d-flex justify-end pr-10 py-8"},[n("v-dialog",{attrs:{slot:"append","max-width":"20%"},slot:"append",model:{value:t.addPaymentDialog,callback:function(e){t.addPaymentDialog=e},expression:"addPaymentDialog"}},[n("v-card",[n("v-card-title",[t._v("Agregar pago")]),n("v-card-text",[n("v-row",[n("v-text-field",{attrs:{placeholder:"Ingresa monto",prefix:"S/"},model:{value:t.payment,callback:function(e){t.payment=e},expression:"payment"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){return t.addPayment()}}},[t._v("Aceptar")]),n("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.addPaymentDialog=!1}}},[t._v("Cancelar")]),n("v-spacer")],1)],1)],1)],1)],1)],1)],1)},Ut=[],Ft=(a("a9e3"),a("c35a"),a("b680"),function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"getOperationsByClientId",value:function(t){return F.get("api/clients/".concat(t,"/operations/"),{header:q()})}},{key:"getOperationByClientIdAndId",value:function(t,e){return F.get("api/clients/".concat(t,"/operations/").concat(e,"/"),{header:q()})}},{key:"saveOperation",value:function(t,e){return F.post("api/clients/".concat(e,"/operations/"),t)}},{key:"saveProductOnOperation",value:function(t,e,a){return F.post("api/operations/".concat(t,"/products/").concat(e,"/"),a)}},{key:"getProductsByOperationId",value:function(t){return F.get("api/operations/".concat(t,"/operations-products/"))}},{key:"payOperation",value:function(t,e,a){return F.patch("api/clients/".concat(t,"/operations/").concat(e,"/"),a,{header:q()})}}]),t}()),qt=new Ft,Lt=function(){function t(){Object(N["a"])(this,t)}return Object(E["a"])(t,[{key:"getProductsByAccountId",value:function(t){return F.get("api/accounts/".concat(t,"/products/"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},{key:"saveProduct",value:function(t,e){return F.post("api/accounts/".concat(t,"/products/"),e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},{key:"editProduct",value:function(t,e){return F.put("api/accounts/".concat(t,"/products/").concat(e.id,"/"),e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}},{key:"deleteProduct",value:function(t,e){return F.delete("api/accounts/".concat(t,"/products/").concat(e,"/"),{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})}}]),t}(),Gt=new Lt,Ht={name:"Client",components:{Slidebar:T},data:function(){return{id:0,headers:[{text:"ID Operación",align:"start",sortable:!0,value:"operationId"},{text:"Fecha",value:"operationDate",sortable:!1},{text:"Plazo de pago (dias)",value:"time",sortable:!1},{text:"Monto Total de Compra",value:"total",sortable:!1},{text:"Monto por saldar(sin intereses)",value:"balance",sortable:!1},{text:"Monto Total a Pagar",value:"future",sortable:!1},{text:"Monto Pagado",value:"payed",sortable:!1},{text:"Fecha de pago o anticipado",value:"payDate",sortable:!1},{text:"Detalles",value:"actions",sortable:!1}],clientId:null,client:{first_name:"",last_name:"",email:"",address:"",phone:"",dni:"",currency:"",credit_total:0,compensatory_value:0,moratorium_value:0,rate_id:"",rate_name:"",quotation:1,open_date:"",maintenance:0},operation:{time:0},editClientDialog:!1,addOperationDialog:!1,addPaymentDialog:!1,items:[],operations:[],products:[],productsSelected:[],payment:0,search:null,change:!1,pays:0,flag:!1,numberRule:[function(t){return!isNaN(parseFloat(t))&&parseFloat(t)>=0||"El numero debe de ser positivo"}]}},mounted:function(){this.id=localStorage.getItem("id"),this.clientId=this.$route.params.id,this.getClientById(),this.getOperations(),this.getProducts()},created:function(){localStorage.getItem("token")||this.$router.push("/login")},methods:{editItem:function(t){var e=t.operationId;this.$router.push("/client/".concat(this.clientId,"/operation/").concat(e))},getClientById:function(){var t=this;G.getClientByAccountIdAndId(this.clientId).then((function(e){var a=e.data;console.log(e.data),t.client.first_name=a.first_name,t.client.last_name=a.last_name,t.client.email=a.email,t.client.address=a.address,t.client.currency=a.currency,t.client.dni=a.dni,t.client.compensatory_value=a.compensatory_value,t.client.moratorium_value=a.moratorium_value,t.client.rate_name=a.rate_name,t.client.open_date=a.open_date,t.client.phone=a.phone,t.client.credit_total=a.credit_total,t.client.rate_id=a.rate_id,t.client.maintenance=a.maintenance})).catch((function(t){return console.log(t)}))},getOperations:function(){var t=this;qt.getOperationsByClientId(this.clientId).then((function(e){t.items=[];var a=e.data;a.forEach((function(e){var a={operationId:e.id,operationDate:e.operation_date,state:e.state,delivery:e.delivery,balance:t.setBalance(e),payed:e.payed,future:e.future,time:e.time,total:e.total,maintenance:e.maintenance,payDate:e.pay_date?e.pay_date:"Sin pago anticipado"};t.items.push(a)}))})).catch((function(t){return console.log(t)}))},getProducts:function(){var t=this;this.products=[],Gt.getProductsByAccountId(this.id).then((function(e){var a=e.data;a.forEach((function(e){var a={id:e.id,name:e.name,measurement:e.measurement,unitCost:e.unit_cost,quantity:null};t.products.push(a)}))})).catch((function(t){return console.log(t)}))},addOperation:function(){var t=this;qt.saveOperation(this.operation,this.clientId).then((function(e){var a=e.data.id;t.productsSelected.forEach((function(e){var n={quantity:e.quantity};qt.saveProductOnOperation(a,e.id,n).then((function(){t.getOperations()})).catch((function(t){return console.log(t)}))})),t.productsSelected=[],t.addOperationDialog=!1})).catch((function(t){return console.log(t)}))},addPayment:function(){var t=this;this.pays=0;var e=[];this.items.forEach((function(t){t.state||e.push(t)})),e.sort((function(t,e){return t.operationDate>e.operationDate?1:-1})),console.log(e),e.forEach((function(e){var a=t.setSinglePay(e);console.log(a);var n={payed:a};qt.payOperation(t.clientId,e.operationId,n).then((function(){t.pays++,t.getOperations(),t.addPaymentDialog=!1}))})),this.payment>0&&(this.addPaymentDialog=!1,this.payment=Number.parseFloat(this.payment).toFixed(2),this.change=!0),this.pays>0&&(this.flag=!0)},editClientById:function(){var t={compensatory_value:this.client.compensatory_value,moratorium_value:this.client.moratorium_value,address:this.client.address,credit_total:this.client.credit_total};G.updateClient(this.clientId,t).then((function(){location.reload()}))},setBalance:function(t){return t.balance<=0?t.state?0:t.total:t.balance},setSinglePay:function(t){var e=this.payment;return t.future<=this.payment?(this.payment-=t.future,this.payment=Number.parseFloat(this.payment).toFixed(2),t.future):(this.payment=0,e)}}},Jt=Ht,Zt=(a("071c"),Object(s["a"])(Jt,zt,Ut,!1,null,"601d28e9",null)),Yt=Zt.exports;u()(Zt,{VBtn:I["a"],VCard:X["a"],VCardActions:tt["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VDataTable:nt["a"],VDialog:ot["a"],VIcon:V["a"],VImg:rt["a"],VRow:it["a"],VSelect:ct["a"],VSpacer:$["a"],VTextField:st["a"]});var Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"py-0 px-0",attrs:{fluid:""}},[a("Slidebar"),a("v-row",[a("v-spacer"),a("v-col",{staticClass:"col-sm-7 pt-8"},[a("v-card",[a("v-card-title",[t._v(" Productos "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("v-dialog",{attrs:{slot:"append","max-width":"30%"},slot:"append",scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"md12 hidden-sm-and-down",attrs:{color:"green accent-2"}},"v-btn",o,!1),n),[t._v("+ Agregar producto")]),a("v-btn",t._g(t._b({staticClass:"sm12 hidden-md-and-up",attrs:{color:"green accent-2",small:""}},"v-btn",o,!1),n),[t._v("+")])]}}]),model:{value:t.addProductDialog,callback:function(e){t.addProductDialog=e},expression:"addProductDialog"}},[a("v-card",[a("v-card-title",[t._v("Agregar producto")]),a("v-card-text",[a("v-row",[a("v-text-field",{attrs:{label:"Nombre de producto"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"Costo por unidad"},model:{value:t.product.unit_cost,callback:function(e){t.$set(t.product,"unit_cost",e)},expression:"product.unit_cost"}})],1),a("v-col",[a("v-select",{attrs:{items:t.unitOfMeasurements,hint:""+t.UOMChose.name,"item-text":"abbr","item-value":"name",label:"Unidad",placeholder:"Escoge unidad de medida","return-object":""},model:{value:t.UOMChose,callback:function(e){t.UOMChose=e},expression:"UOMChose"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){return t.saveProduct()}}},[t._v("Agregar")]),a("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.addProductDialog=!1}}},[t._v("Cancelar")]),a("v-spacer")],1)],1)],1)],1)],1),a("v-data-table",{attrs:{headers:t.headers,items:t.items,search:t.search,"footer-props":{"items-per-page-text":"Clientes por página:"}},scopedSlots:t._u([{key:"item.actions",fn:function(e){var n=e.item;return[a("v-dialog",{attrs:{slot:"append","max-width":"40%"},slot:"append",scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.openEdit(n)}}},"v-icon",r,!1),o),[t._v("mdi-pencil")])]}}],null,!0),model:{value:t.editProductDialog,callback:function(e){t.editProductDialog=e},expression:"editProductDialog"}},[a("v-card",[a("v-card-title",[t._v("Editar producto")]),a("v-card-text",[a("v-row",[a("v-text-field",{attrs:{label:"Nombre de producto"},model:{value:n.name,callback:function(e){t.$set(n,"name",e)},expression:"item.name"}})],1),a("v-row",[a("v-col",[a("v-text-field",{attrs:{rules:t.numberRule,"error-count":"2",type:"number",label:"Costo por unidad"},model:{value:n.unit_cost,callback:function(e){t.$set(n,"unit_cost",e)},expression:"item.unit_cost"}})],1),a("v-col",[a("v-select",{attrs:{items:t.unitOfMeasurements,hint:""+t.UOMChose.name,"item-text":"abbr","item-value":"name",label:"Unidad","return-object":""},model:{value:t.UOMChose,callback:function(e){t.UOMChose=e},expression:"UOMChose"}})],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){return t.editProduct(n)}}},[t._v("Guardar")]),a("v-btn",{attrs:{color:"green accent-2"},on:{click:function(e){t.editProductDialog=!1}}},[t._v("Cancelar")]),a("v-spacer")],1)],1)],1),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteProduct(n.id)}}},[t._v("mdi-delete")])]}}])})],1)],1),a("v-spacer")],1)],1)},Qt=[],Wt={name:"Product",components:{Slidebar:T},data:function(){return{headers:[{text:"Nombre de producto",align:"start",sortable:!0,value:"name"},{text:"Costo por unidad",value:"unit_cost",sortable:!1},{text:"Unidad de medida",value:"measurement",sortable:!1},{text:"Acciones",value:"actions",sortable:!1}],unitOfMeasurements:[{abbr:"kg",name:"kilogramos"},{abbr:"g",name:"gramos"},{abbr:"L",name:"litros"},{abbr:"m",name:"metros"},{abbr:"oz",name:"onzas"},{abbr:"lb",name:"libras"},{abbr:"unidades",name:""}],id:0,addProductDialog:!1,editProductDialog:!1,UOMChose:{abbr:"unidades",name:""},product:{name:"",unit_cost:0,measurement:""},items:[],search:null,numberRule:[function(t){return!isNaN(parseFloat(t))&&parseFloat(t)>=0||"El numero debe de ser positivo"}]}},mounted:function(){this.id=localStorage.getItem("id"),this.getProducts()},created:function(){},methods:{getProducts:function(){var t=this;Gt.getProductsByAccountId(this.id).then((function(e){t.items=e.data})).catch((function(t){console.log(t)})),this.UOMChose=this.unitOfMeasurements},saveProduct:function(){var t=this;this.product.measurement=this.UOMChose.abbr,console.log(this.product),Gt.saveProduct(this.id,this.product).then((function(e){console.log(e),t.UOMChose="",t.product={name:"",unit_cost:0,measurement:""},t.addProductDialog=!1,window.location.reload()})).catch((function(t){console.log(t)}))},openEdit:function(t){this.UOMChose.abbr=t.measurement},editProduct:function(t){var e=this;t.measurement=this.UOMChose.abbr,Gt.editProduct(this.id,t).then((function(t){console.log(t),e.UOMChose="",e.getProducts(),e.editProductDialog=!1})).catch((function(t){console.log(t)}))},deleteProduct:function(t){var e=this;Gt.deleteProduct(this.id,t).then((function(t){console.log(t),e.getProducts()}))}}},Xt=Wt,te=Object(s["a"])(Xt,Kt,Qt,!1,null,"23c3886c",null),ee=te.exports;u()(te,{VBtn:I["a"],VCard:X["a"],VCardActions:tt["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VDataTable:nt["a"],VDialog:ot["a"],VIcon:V["a"],VRow:it["a"],VSelect:ct["a"],VSpacer:$["a"],VTextField:st["a"]});var ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"py-0 px-0",attrs:{fluid:""}},[a("Slidebar"),a("v-row",{staticClass:"full"},[a("v-spacer"),a("v-col",{staticClass:"col-sm-8"},[a("v-row",{staticClass:"d-flex justify-center"},[a("v-card",[a("v-card-title",[t._v("Detalles de la operación")]),a("v-card-text",{staticClass:"mx-5"},[a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("ID Operación:")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.id))])]),a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Fecha:")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.operation_date))])]),a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Monto total(incluye delivery):")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.total)+" "+t._s(t.client.currency))])]),t.operation.payed>0?a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Monto pagado hasta el momento: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.payed))])]):t._e(),a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Monto a pagar: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.future)+" "+t._s(t.client.currency))])]),a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Plazo de pago: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.time)+" días")])]),a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Delivery: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.delivery)+" "+t._s(t.client.currency))])]),0!=t.operation.maintenance?a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Mantenimiento: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.operation.maintenance))])]):t._e(),0!=t.client.compensatory_value?a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Tasa de interes en el plazo: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.client.compensatory_value)+" % "+t._s(t.client.rate_name))])]):t._e(),0!=t.client.moratorium_value?a("v-row",[a("h3",{staticClass:"pr-2"},[t._v("Tasa de interes adicional fuera del plazo: ")]),a("h3",{staticClass:"pr-2"},[t._v(t._s(t.client.moratorium_value)+" % "+t._s(t.client.rate_name))])]):t._e(),a("v-spacer"),a("v-row",{staticClass:"mt-3"},[a("h2",[t._v("Productos:")])]),a("v-row",{staticClass:"mt-5"},[a("v-data-table",{staticClass:"elevation-2",attrs:{headers:t.headers,items:t.items,"items-per-page":10,"footer-props":{"items-per-page-text":"Productos por página:"}}})],1)],1)],1)],1),a("v-row",{staticClass:"mt-5 justify-center"},[a("v-btn",{attrs:{color:"green accent-2"},on:{click:t.exportPdf}},[t._v(" Exportar Boleta")])],1)],1),a("v-spacer")],1)],1)},ne=[],oe=a("8baf"),re=a("0da4"),ie=a.n(re),ce={name:"Operation",components:{Slidebar:T},data:function(){return{headers:[{text:"Nombre de producto",align:"start",sortable:!0,value:"product_name"},{text:"Costo por unidad",value:"unit_cost",sortable:!1},{text:"Unidad",value:"measurement",sortable:!1},{text:"Cantidad",value:"quantity",sortable:!1},{text:"Total",value:"total",sortable:!1}],operation:null,addOperation:!1,operationDetails:!1,items:[],client:null}},mounted:function(){this.clientId=this.$route.params.clientId,this.operationId=this.$route.params.operationId,this.getProductsByOperationId(),this.getOperationByClientId(),this.getClientById()},created:function(){localStorage.getItem("token")||this.$router.push("/login")},methods:{getProductsByOperationId:function(){var t=this;qt.getProductsByOperationId(this.operationId).then((function(e){t.items=e.data})).catch((function(t){return console.log(t)}))},getOperationByClientId:function(){var t=this;qt.getOperationByClientIdAndId(this.clientId,this.operationId).then((function(e){t.operation=e.data}))},exportPdf:function(){var t,e,a=["Nombre de Producto","Costo por unidad","Unidad","Cantidad","Total"],n=new oe["default"],o=0,r=[];this.items.forEach((function(t){var e=["".concat(t.product_name),"".concat(t.unit_cost),"".concat(t.measurement),"".concat(t.quantity),"".concat(t.total)];r.push(e)})),n.text("ID Operacion: ".concat(this.operation.id),10,o+=10),n.text("Fecha: ".concat(this.operation.operation_date),10,o+=10),n.text("Plazo de Pago: ".concat(this.operation.time),10,o+=10),n.text("Monto total(incluye delivery): ".concat(this.operation.total,"  ").concat(this.client.currency),10,o+=10),this.payed>0&&n.text("Monto Pagado hasta el momento: ".concat(this.operation.payed),10,o+=10),n.text("Monto a pagar: ".concat(this.operation.future,"  ").concat(this.client.currency),10,o+=10),n.text("Delivery: ".concat(this.operation.delivery,"  ").concat(this.client.currency),10,o+=10),this.operation.maintenance>0&&n.text("Maintenance: ".concat(this.operation.maintenance),10,o+=10),n.text("Tasa de interes en el plazo: ".concat(this.client.compensatory_value," % ").concat(null===(t=this.client)||void 0===t?void 0:t.rate_name),10,o+=10),n.text("Tasa de interes adicional fuera del plazo: ".concat(this.client.moratorium_value," %  ").concat(null===(e=this.client)||void 0===e?void 0:e.rate_name),10,o+=10),ie()(n,{head:[a],body:r,margin:{top:o+10,bottom:20}}),n.save("boleta-operation-".concat(this.operation.id,"-").concat(this.operation.operation_date,".pdf"))},getClientById:function(){var t=this;G.getClientByAccountIdAndId(this.clientId).then((function(e){t.client=e.data})).catch((function(t){return console.log(t)}))}}},se=ce,le=(a("c369"),Object(s["a"])(se,ae,ne,!1,null,"bf5f2644",null)),ue=le.exports;u()(le,{VBtn:I["a"],VCard:X["a"],VCardText:tt["b"],VCardTitle:tt["c"],VCol:et["a"],VContainer:at["a"],VDataTable:nt["a"],VRow:it["a"],VSpacer:$["a"]}),n["a"].use(h["a"]);var de=new h["a"]({mode:"history",routes:[{path:"/",name:"root",redirect:"index",component:p},{path:"/index",name:"index",component:$t},{path:"/home",name:"home",component:ut},{path:"/login",name:"login",component:gt},{path:"/register",name:"register",component:Vt},{path:"/profile",name:"profile",component:Mt},{path:"/client/:id",name:"client",component:Yt},{path:"/product",name:"product",component:ee},{path:"/client/:clientId/operation/:operationId",name:"operation",component:ue}]}),ve=a("2f62"),pe=(a("d3b7"),JSON.parse(localStorage.getItem("user"))),me=pe?{status:{loggedIn:!0},user:pe}:{status:{loggedIn:!1},user:null},fe={namespaced:!0,state:me,actions:{login:function(t,e){var a=t.commit;return console.log("here"),Z.login(e).then((function(t){return a("loginSuccess",t),Promise.resolve(t)}),(function(t){return a("loginFailure"),Promise.reject(t)}))},logout:function(t){var e=t.commit;Z.logout(),e("logout")},register:function(t,e){var a=t.commit;console.log(e);var n={email:e.email,password:e.password,first_name:e.firstName,last_name:e.lastName,dni:e.dni,phone:e.phone,address:e.address,organization:e.organization,ruc:e.ruc,district_id:e.districtId};return Z.register(n).then((function(t){return a("registerSuccess"),Promise.resolve(t.data)}),(function(t){return a("registerFailure"),Promise.reject(t)}))}},mutations:{loginSuccess:function(t,e){t.status.loggedIn=!0,t.user=e},loginFailure:function(t){t.status.loggedIn=!1,t.user=null},logout:function(t){t.status.loggedIn=!1,t.user=null},registerSuccess:function(t){t.status.loggedIn=!1},registerFailure:function(t){t.status.loggedIn=!1}}};n["a"].use(ve["a"]);var he=new ve["a"].Store({modules:{auth:fe}});n["a"].config.productionTip=!1,new n["a"]({vuetify:f,router:de,store:he,render:function(t){return t(p)}}).$mount("#app")},"5e9a":function(t,e,a){},aaf7:function(t,e,a){},baf9:function(t,e,a){"use strict";var n=a("5e9a"),o=a.n(n);o.a},c037:function(t,e,a){t.exports=a.p+"img/bodega.404490dd.png"},c121:function(t,e,a){t.exports=a.p+"img/user.d6759143.png"},c369:function(t,e,a){"use strict";var n=a("f8bb"),o=a.n(n);o.a},cf05:function(t,e,a){t.exports=a.p+"img/logo.03f81fe2.png"},cf90:function(t,e,a){},f8bb:function(t,e,a){}});
//# sourceMappingURL=app.99fb503d.js.map